version: '3.8'

services:
  joshatticusid:
    build: .
    ports:
      - "3005:3005"
    environment:
      - SECRET_KEY=${SECRET_KEY}
      - DATABASE_URL=${DATABASE_URL:-sqlite:///instance/users.db}
      - FLASK_ENV=${FLASK_ENV:-production}
      - SMTP_SERVER=${SMTP_SERVER:-smtp.gmail.com}
      - SMTP_PORT=${SMTP_PORT:-587}
      - SMTP_USERNAME=${SMTP_USERNAME}
      - SMTP_PASSWORD=${SMTP_PASSWORD}
      - SMTP_FROM_EMAIL=${SMTP_FROM_EMAIL}
      - SMTP_FROM_NAME=${SMTP_FROM_NAME:-JoshAtticusID}
    volumes:
      - ./instance:/app/instance
      - ./static/uploads:/app/static/uploads
    restart: unless-stopped
